# 物流对账与财务应付单系统 - 前端测试清单

## 🚀 测试前准备

### 1. 环境准备
- [ ] 后端服务正常运行 (http://localhost:5000)
- [ ] 数据库迁移已完成
- [ ] API 文档可访问 (http://localhost:5000/docs)
- [ ] 前端开发服务器已启动 (pnpm dev)
- [ ] 使用 admin/password 登录系统

### 2. 初始数据准备
- [ ] 创建至少 2 个物流服务商（通过后台或 API）
- [ ] 创建至少 1 个发货单
- [ ] 为发货单添加物流服务记录

---

## 📋 功能测试清单

### 一、物流对账单列表页面 (`/logistics/statement`)

#### 1.1 页面访问
- [ ] 从侧边栏菜单点击 "物流对账管理"
- [ ] 页面正常加载，无报错
- [ ] 显示搜索栏和数据表格

#### 1.2 搜索筛选功能
- [ ] **物流服务商筛选**
  - [ ] 下拉列表显示所有启用的物流服务商
  - [ ] 选择服务商后点击"查询"，数据正确过滤
  - [ ] 点击"清除"，筛选条件被清除
  
- [ ] **状态筛选**
  - [ ] 下拉列表包含：草稿、已确认、已提交、已批准、已付款
  - [ ] 选择状态后查询，数据正确过滤
  
- [ ] **对账周期筛选**
  - [ ] 日期范围选择器正常工作
  - [ ] 选择日期范围后查询，数据正确过滤
  
- [ ] **重置按钮**
  - [ ] 点击"重置"，所有筛选条件清空
  - [ ] 数据恢复为全量显示

#### 1.3 数据展示
- [ ] 表格显示以下列：
  - [ ] 对账单号 (LS + YYYYMMDD + 4位数字)
  - [ ] 物流服务商名称
  - [ ] 对账周期 (开始日期 ~ 结束日期)
  - [ ] 总金额 (¥格式，右对齐)
  - [ ] 状态标签 (颜色正确)
  - [ ] 确认时间
  - [ ] 创建时间
  - [ ] 操作按钮列

- [ ] **状态标签颜色**
  - [ ] 草稿 - 灰色 (default)
  - [ ] 已确认 - 蓝色 (processing)
  - [ ] 已提交 - 橙色 (warning)
  - [ ] 已批准 - 绿色 (success)
  - [ ] 已付款 - 绿色 (success)

#### 1.4 新建对账单功能
- [ ] 点击 "新建对账单" 按钮
- [ ] 弹窗正常打开，标题为 "新建对账单"
- [ ] 表单包含以下字段：
  - [ ] 物流服务商（必填，下拉选择）
  - [ ] 对账周期（必填，日期范围）
  - [ ] 自动包含服务（开关，默认开启）
  - [ ] 备注（可选）

- [ ] **表单验证**
  - [ ] 不填写必填项，点击"确定"，显示验证错误
  - [ ] 填写完整信息，点击"确定"，成功创建
  - [ ] 创建成功后弹窗关闭，列表自动刷新
  - [ ] 新创建的对账单出现在列表顶部

- [ ] **取消操作**
  - [ ] 点击"取消"按钮，弹窗关闭
  - [ ] 表单数据被清空

#### 1.5 操作按钮功能

##### 草稿状态的对账单操作
- [ ] **查看按钮**
  - [ ] 点击"查看"，跳转到详情页
  - [ ] URL 格式正确 (`/logistics/statement/:id`)

- [ ] **确认按钮**
  - [ ] 点击"确认"，显示二次确认弹窗
  - [ ] 弹窗提示：确认后对账单将锁定，无法再修改
  - [ ] 点击"确定"，对账单状态变为"已确认"
  - [ ] 点击"取消"，弹窗关闭，无变化

- [ ] **删除按钮**
  - [ ] 点击"删除"，显示二次确认弹窗
  - [ ] 弹窗提示：确定要删除该对账单吗？此操作不可恢复
  - [ ] 点击"确定"，对账单被删除
  - [ ] 列表自动刷新，已删除的记录消失

##### 已确认状态的对账单操作
- [ ] **提交财务按钮**
  - [ ] 点击"提交财务"，显示二次确认弹窗
  - [ ] 弹窗提示：提交后将生成财务应付单
  - [ ] 点击"确定"，对账单状态变为"已提交"
  - [ ] 显示成功提示信息

#### 1.6 表格功能
- [ ] **刷新按钮**
  - [ ] 点击工具栏刷新按钮，数据重新加载
  
- [ ] **分页功能**
  - [ ] 如果数据超过 20 条，显示分页器
  - [ ] 切换页码，数据正确显示
  - [ ] 每页显示 20 条记录

---

### 二、物流对账单详情页面 (`/logistics/statement/:id`)

#### 2.1 页面访问
- [ ] 从列表页点击"查看"按钮
- [ ] 页面正常加载，显示完整的对账单信息
- [ ] 显示加载动画（loading）

#### 2.2 基本信息展示
- [ ] **描述列表（Descriptions）显示正确**
  - [ ] 对账单号
  - [ ] 状态标签（颜色与列表页一致）
  - [ ] 物流服务商名称
  - [ ] 对账周期（格式：YYYY-MM-DD ~ YYYY-MM-DD）
  - [ ] 总金额（红色、大字体、¥格式）
  - [ ] 币种（CNY）
  - [ ] 确认人（昵称）
  - [ ] 确认时间
  - [ ] 创建时间
  - [ ] 财务应付单ID（如已提交）
  - [ ] 备注（跨 2 列显示）

#### 2.3 操作按钮
- [ ] **返回按钮**
  - [ ] 点击"返回"，回到列表页
  
- [ ] **确认对账单按钮**（仅草稿状态显示）
  - [ ] 按钮为主按钮样式（蓝色）
  - [ ] 点击显示确认弹窗
  - [ ] 确认成功后，状态更新为"已确认"
  - [ ] 按钮消失，显示"提交财务"按钮

- [ ] **提交财务按钮**（仅已确认状态显示）
  - [ ] 按钮为主按钮样式（蓝色）
  - [ ] 点击显示确认弹窗
  - [ ] 提交成功后，状态更新为"已提交"
  - [ ] 显示财务应付单ID

#### 2.4 数据加载
- [ ] 页面加载时显示 Spin 加载动画
- [ ] 数据加载失败时显示错误提示
- [ ] 刷新页面，数据正常重新加载

---

### 三、财务应付单列表页面 (`/finance/payable`)

#### 3.1 页面访问
- [ ] 从侧边栏菜单点击 "应付账款管理"
- [ ] 页面正常加载，无报错
- [ ] 显示搜索栏和数据表格

#### 3.2 搜索筛选功能
- [ ] **来源类型筛选**
  - [ ] 下拉列表包含：物流对账、供货合同、费用单
  - [ ] 选择类型后查询，数据正确过滤
  
- [ ] **状态筛选**
  - [ ] 下拉列表包含：待审批、已批准、付款池中、已付款
  - [ ] 选择状态后查询，数据正确过滤
  
- [ ] **重置功能**
  - [ ] 点击"重置"，筛选条件清空

#### 3.3 数据展示
- [ ] 表格显示以下列：
  - [ ] 应付单号 (AP + YYYYMMDD + 4位数字)
  - [ ] 来源类型（中文显示）
  - [ ] 来源单号
  - [ ] 供应商名称
  - [ ] 应付金额 (¥格式，右对齐)
  - [ ] 应付日期
  - [ ] 状态标签（颜色正确）
  - [ ] 创建时间
  - [ ] 操作按钮

- [ ] **状态标签颜色**
  - [ ] 待审批 - 橙色 (warning)
  - [ ] 已批准 - 蓝色 (processing)
  - [ ] 付款池中 - 青色 (cyan)
  - [ ] 已付款 - 绿色 (success)

#### 3.4 操作功能

##### 待审批状态
- [ ] **批准按钮**
  - [ ] 点击"批准"，显示确认弹窗
  - [ ] 确认后状态变为"已批准"
  - [ ] 显示成功提示

##### 已批准状态
- [ ] **加入付款池按钮**
  - [ ] 点击"加入付款池"，显示确认弹窗
  - [ ] 确认后状态变为"付款池中"
  - [ ] 显示成功提示

- [ ] **标记已付款按钮**
  - [ ] 点击"标记已付款"，打开付款弹窗
  - [ ] 弹窗显示：应付单号、应付金额、实付金额输入框
  - [ ] 实付金额默认等于应付金额
  - [ ] 实付金额不能超过应付金额
  - [ ] 实付金额必须大于0
  - [ ] 确认后状态变为"已付款"

##### 付款池中状态
- [ ] **标记已付款按钮**
  - [ ] 功能与"已批准"状态相同

#### 3.5 表格功能
- [ ] 刷新按钮正常工作
- [ ] 分页功能正常（每页 20 条）

---

## 🔄 业务流程完整性测试

### 流程1：创建对账单 → 确认 → 提交财务
1. [ ] **创建对账单**
   - 在列表页点击"新建对账单"
   - 填写物流服务商、对账周期
   - 开启"自动包含服务"
   - 创建成功

2. [ ] **查看详情**
   - 点击"查看"按钮
   - 确认信息正确
   - 返回列表

3. [ ] **确认对账单**
   - 在列表页点击"确认"
   - 确认操作
   - 状态变为"已确认"

4. [ ] **提交财务**
   - 点击"提交财务"
   - 确认操作
   - 状态变为"已提交"
   - 显示提交成功消息

5. [ ] **验证应付单生成**
   - 进入"应付账款管理"页面
   - 找到新生成的应付单
   - 来源类型为"物流对账"
   - 来源单号与对账单号一致
   - 金额一致

### 流程2：应付单审批 → 加入付款池 → 付款
1. [ ] **批准应付单**
   - 找到"待审批"状态的应付单
   - 点击"批准"
   - 确认操作
   - 状态变为"已批准"

2. [ ] **加入付款池**
   - 点击"加入付款池"
   - 确认操作
   - 状态变为"付款池中"

3. [ ] **标记已付款**
   - 点击"标记已付款"
   - 输入实付金额（尝试部分付款）
   - 确认付款
   - 状态变为"已付款"

---

## 🎨 UI/UX 测试

### 1. 响应式布局
- [ ] 在不同窗口宽度下测试
- [ ] 表格列宽自动调整
- [ ] 移动端布局（如适用）

### 2. 深色模式
- [ ] 切换到深色模式
- [ ] 所有页面正常显示
- [ ] 卡片、表格、按钮颜色适配
- [ ] 标签颜色在深色模式下可读

### 3. 交互体验
- [ ] 加载状态提示清晰
- [ ] 操作反馈及时（成功/失败提示）
- [ ] 二次确认弹窗文案清晰
- [ ] 按钮禁用状态正确（如有）

### 4. 错误处理
- [ ] 网络错误时显示友好提示
- [ ] 后端返回错误时显示具体错误信息
- [ ] 表单验证错误提示明确

---

## 🐛 边界情况测试

### 1. 数据为空
- [ ] 列表无数据时显示空状态提示
- [ ] 物流服务商列表为空时的处理

### 2. 权限控制（如实现）
- [ ] 无权限用户访问页面的处理
- [ ] 操作按钮根据权限显示/隐藏

### 3. 并发操作
- [ ] 同时打开多个对账单详情页
- [ ] 快速连续点击操作按钮
- [ ] 操作后立即刷新页面

### 4. 数据一致性
- [ ] 在列表页操作后，详情页数据同步更新
- [ ] 刷新页面后数据保持一致

---

## 🔧 技术验证

### 1. 浏览器兼容性
- [ ] Chrome (推荐)
- [ ] Firefox
- [ ] Edge
- [ ] Safari (Mac)

### 2. 控制台检查
- [ ] 无 JavaScript 错误
- [ ] 无 TypeScript 类型错误
- [ ] 无 Vue 警告
- [ ] API 请求/响应正常

### 3. 性能检查
- [ ] 页面加载速度 < 2秒
- [ ] 表格渲染流畅
- [ ] 无内存泄漏

---

## ✅ 测试完成标准

### 必须通过项（P0）
- [ ] 所有核心业务流程可正常完成
- [ ] 无功能性错误
- [ ] 数据展示准确
- [ ] 操作反馈正确

### 建议通过项（P1）
- [ ] UI 美观，符合设计规范
- [ ] 深色模式正常
- [ ] 错误提示友好
- [ ] 性能良好

### 优化项（P2）
- [ ] 响应式布局完善
- [ ] 动画效果流畅
- [ ] 快捷键支持（如适用）

---

## 📝 问题记录模板

**测试日期**: YYYY-MM-DD  
**测试人员**: 

### 发现的问题

#### 问题 1
- **严重程度**: [Critical/High/Medium/Low]
- **问题描述**: 
- **复现步骤**: 
- **预期结果**: 
- **实际结果**: 
- **截图**: 

#### 问题 2
...

---

## 🎯 测试总结

**测试覆盖率**: ____ / ____ 项通过  
**核心功能**: ✅ / ❌  
**UI/UX**: ✅ / ❌  
**性能**: ✅ / ❌  

**整体评价**: 
- [ ] 可以发布到生产环境
- [ ] 需要修复 Critical/High 问题后发布
- [ ] 需要重新测试

**备注**: 

