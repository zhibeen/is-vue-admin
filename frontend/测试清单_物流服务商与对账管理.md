# SERC财务中台 - 物流服务商与对账管理系统 人工测试清单

> **测试版本**: v1.0  
> **测试日期**: 2025-12-19  
> **测试环境**: 开发环境

---

## 📋 测试准备

### 1. 生成模拟数据

在项目根目录执行以下命令：

```bash
# 1. 初始化物流服务商数据（6个服务商）
docker compose exec backend flask logistics init-providers

# 2. 为发货单生成物流服务明细
docker compose exec backend flask logistics generate-services --count 2

# 3. 为发货单生成模拟凭证
docker compose exec backend flask logistics generate-documents --count 3

# 4. 查看数据统计
docker compose exec backend flask logistics stats
```

### 2. 登录系统

- **用户名**: `admin`
- **密码**: `password`
- **访问地址**: http://localhost:5173 （前端开发服务器）

---

## 🧪 测试模块

## 一、物流服务商管理

### 测试入口
导航菜单 → **物流管理** → **物流服务商管理**

### 1.1 列表页测试

| 测试项 | 操作步骤 | 预期结果 | 实际结果 | 状态 |
|--------|---------|---------|---------|------|
| 页面加载 | 打开物流服务商列表页 | 显示服务商列表（6个服务商） | | ☐ |
| 数据展示 | 查看表格列 | 显示：ID、编码、名称、服务类型、付款方式、结算周期、联系人、电话、状态 | | ☐ |
| 状态标签 | 查看"状态"列 | 启用显示绿色标签，停用显示红色标签 | | ☐ |
| 服务类型显示 | 查看"服务类型"列 | 正确显示中文名称（如"国内卡车运输"） | | ☐ |
| 刷新功能 | 点击表格工具栏的刷新按钮 | 重新加载数据 | | ☐ |

### 1.2 新建服务商测试

| 测试项 | 操作步骤 | 预期结果 | 实际结果 | 状态 |
|--------|---------|---------|---------|------|
| 打开表单 | 点击"新建服务商"按钮 | 弹出表单弹窗 | | ☐ |
| 表单字段 | 查看表单 | 显示所有必填字段（名称、编码、服务类型） | | ☐ |
| 必填验证 | 不填必填项，点击确定 | 显示验证错误提示 | | ☐ |
| 编码验证 | 输入少于2个字符的编码 | 提示"编码至少需要2个字符" | | ☐ |
| 重复编码 | 输入已存在的编码（如SF001） | 提示"服务商编码已存在" | | ☐ |
| 成功创建 | 填写完整信息并提交 | 创建成功，列表刷新显示新数据 | | ☐ |
| 服务区域 | 在"服务区域"字段输入多个区域 | 支持标签模式输入（tags） | | ☐ |

**测试数据建议**：
```
服务商名称：测试物流ABC
服务商编码：TEST-ABC-001
服务类型：国内卡车运输
付款方式：后付
结算周期：月结
联系人：测试人员
联系电话：13900139000
```

### 1.3 编辑服务商测试

| 测试项 | 操作步骤 | 预期结果 | 实际结果 | 状态 |
|--------|---------|---------|---------|------|
| 打开编辑 | 点击某行的"编辑"按钮 | 弹出表单，数据已填充 | | ☐ |
| 编码只读 | 查看编码字段 | 编码字段为只读状态（灰色） | | ☐ |
| 更新数据 | 修改联系人和电话，提交 | 更新成功，列表显示新数据 | | ☐ |
| 取消编辑 | 修改后点击取消 | 弹窗关闭，数据未变更 | | ☐ |

### 1.4 启用/停用测试

| 测试项 | 操作步骤 | 预期结果 | 实际结果 | 状态 |
|--------|---------|---------|---------|------|
| 停用服务商 | 点击已启用服务商的"停用"按钮 | 状态变为停用（红色标签） | | ☐ |
| 启用服务商 | 点击已停用服务商的"启用"按钮 | 状态变为启用（绿色标签） | | ☐ |

### 1.5 删除服务商测试

| 测试项 | 操作步骤 | 预期结果 | 实际结果 | 状态 |
|--------|---------|---------|---------|------|
| 删除确认 | 点击"删除"按钮 | 显示确认对话框 | | ☐ |
| 取消删除 | 点击取消 | 对话框关闭，数据未删除 | | ☐ |
| 确认删除 | 点击确认 | 删除成功，列表刷新 | | ☐ |

---

## 二、物流服务明细管理

### 测试入口
1. 导航菜单 → **物流管理** → **发货单管理**
2. 点击任意发货单的"查看"按钮
3. 切换到 **"物流服务"** Tab

### 2.1 列表展示测试

| 测试项 | 操作步骤 | 预期结果 | 实际结果 | 状态 |
|--------|---------|---------|---------|------|
| Tab切换 | 点击"物流服务"Tab | 显示物流服务列表 | | ☐ |
| 数据加载 | 查看表格 | 显示该发货单的物流服务（2条） | | ☐ |
| 物流总费用 | 查看页面右上角 | 显示物流总费用统计 | | ☐ |
| 金额格式 | 查看预估费用和实际费用列 | 格式化显示（¥5,000.00） | | ☐ |
| 状态标签 | 查看状态列 | 不同状态显示不同颜色标签 | | ☐ |

### 2.2 添加物流服务测试

| 测试项 | 操作步骤 | 预期结果 | 实际结果 | 状态 |
|--------|---------|---------|---------|------|
| 打开表单 | 点击"添加物流服务"按钮 | 弹出表单弹窗 | | ☐ |
| 服务商选择 | 点击"物流服务商"下拉 | 显示启用的服务商列表 | | ☐ |
| 服务商搜索 | 在下拉框输入"顺丰" | 筛选出包含"顺丰"的服务商 | | ☐ |
| 必填验证 | 不选服务商，提交 | 提示"请选择物流服务商" | | ☐ |
| 金额输入 | 输入预估费用5000 | 支持数字输入，2位小数 | | ☐ |
| 负数验证 | 输入负数金额 | 提示"费用不能为负数" | | ☐ |
| 成功添加 | 填写完整信息并提交 | 添加成功，列表刷新，总费用更新 | | ☐ |

**测试数据建议**：
```
物流服务商：顺丰速运
服务类型：国内卡车运输
服务描述：深圳至北京陆运
预估费用：3500.00
币种：人民币(CNY)
付款方式：后付
```

### 2.3 编辑物流服务测试

| 测试项 | 操作步骤 | 预期结果 | 实际结果 | 状态 |
|--------|---------|---------|---------|------|
| 打开编辑 | 点击某行的"编辑"按钮 | 弹出表单，数据已填充 | | ☐ |
| 更新实际费用 | 填写实际费用3300，提交 | 更新成功，实际费用列显示新值 | | ☐ |
| 总费用更新 | 查看右上角总费用 | 总费用自动重新计算 | | ☐ |

### 2.4 确认服务测试

| 测试项 | 操作步骤 | 预期结果 | 实际结果 | 状态 |
|--------|---------|---------|---------|------|
| 确认按钮 | 查看"待确认"状态的行 | 显示"确认"按钮 | | ☐ |
| 执行确认 | 点击"确认"按钮 | 状态变为"已确认"（蓝色标签） | | ☐ |
| 确认后操作 | 查看已确认的行 | "确认"按钮消失，仍可编辑 | | ☐ |

### 2.5 删除服务测试

| 测试项 | 操作步骤 | 预期结果 | 实际结果 | 状态 |
|--------|---------|---------|---------|------|
| 删除待确认 | 删除"待确认"状态的服务 | 删除成功 | | ☐ |
| 删除已确认 | 删除"已确认"状态的服务 | 删除成功 | | ☐ |
| 删除已对账 | 尝试删除"已对账"状态的服务 | 提示"已对账的服务不能删除" | | ☐ |
| 删除后更新 | 删除后查看总费用 | 总费用自动重新计算 | | ☐ |

---

## 三、凭证管理

### 测试入口
发货单详情页 → **"凭证管理"** Tab

### 3.1 凭证列表测试

| 测试项 | 操作步骤 | 预期结果 | 实际结果 | 状态 |
|--------|---------|---------|---------|------|
| Tab切换 | 点击"凭证管理"Tab | 显示凭证上传区和列表 | | ☐ |
| 列表显示 | 查看"已上传凭证"卡片 | 显示该发货单的凭证（3个） | | ☐ |
| 文件图标 | 查看列表中的图标 | PDF显示红色图标，图片显示蓝色图标 | | ☐ |
| 文件大小 | 查看文件大小列 | 格式化显示（如1.2MB） | | ☐ |
| 审核状态 | 查看审核状态列 | 显示标签（待审核/已通过/已驳回） | | ☐ |

### 3.2 上传凭证测试

| 测试项 | 操作步骤 | 预期结果 | 实际结果 | 状态 |
|--------|---------|---------|---------|------|
| 上传区显示 | 查看上传区 | 显示拖拽上传区域和提示文字 | | ☐ |
| 点击上传 | 点击上传区 | 打开文件选择对话框 | | ☐ |
| 选择PDF | 选择一个PDF文件 | 开始上传，显示进度 | | ☐ |
| 上传成功 | 等待上传完成 | 提示成功，列表刷新显示新文件 | | ☐ |
| 拖拽上传 | 拖拽文件到上传区 | 开始上传 | | ☐ |
| 多文件上传 | 同时选择多个文件 | 依次上传所有文件 | | ☐ |
| 格式限制 | 尝试上传.txt文件 | 提示"只支持PDF、图片、Excel、Word格式" | | ☐ |
| 大小限制 | 尝试上传超过10MB的文件 | 提示"文件大小不能超过10MB" | | ☐ |

### 3.3 凭证预览测试

| 测试项 | 操作步骤 | 预期结果 | 实际结果 | 状态 |
|--------|---------|---------|---------|------|
| 预览PDF | 点击PDF文件的"预览"按钮 | 弹出预览窗口，显示PDF内容 | | ☐ |
| 预览图片 | 点击图片文件的"预览"按钮 | 弹出预览窗口，显示图片 | | ☐ |
| 预览其他格式 | 点击Excel文件的"预览"按钮 | 显示"暂不支持预览此类型文件" | | ☐ |
| 文件信息 | 查看预览窗口底部 | 显示文件元信息（名称、大小、上传时间等） | | ☐ |
| 关闭预览 | 点击关闭按钮或ESC键 | 预览窗口关闭 | | ☐ |

### 3.4 删除凭证测试

| 测试项 | 操作步骤 | 预期结果 | 实际结果 | 状态 |
|--------|---------|---------|---------|------|
| 删除按钮 | 查看未归档的凭证 | 显示"删除"按钮 | | ☐ |
| 删除确认 | 点击删除按钮 | 显示确认对话框 | | ☐ |
| 确认删除 | 点击确认 | 删除成功，列表刷新 | | ☐ |
| 已归档凭证 | 查看已归档的凭证 | 不显示"删除"按钮 | | ☐ |

---

## 四、集成场景测试

### 4.1 完整业务流程测试

| 步骤 | 操作 | 预期结果 | 实际结果 | 状态 |
|------|------|---------|---------|------|
| 1 | 选择一个发货单 | 进入详情页 | | ☐ |
| 2 | 添加2个物流服务 | 添加成功，显示总费用 | | ☐ |
| 3 | 上传服务凭证（运单） | 上传成功 | | ☐ |
| 4 | 更新第一个服务的实际费用 | 更新成功，总费用变化 | | ☐ |
| 5 | 确认第一个服务 | 状态变为已确认 | | ☐ |
| 6 | 上传付款凭证 | 上传成功 | | ☐ |
| 7 | 切换到"财务信息"Tab | 能看到物流成本汇总 | | ☐ |

### 4.2 权限测试（如果已配置权限）

| 测试项 | 操作步骤 | 预期结果 | 实际结果 | 状态 |
|--------|---------|---------|---------|------|
| 无创建权限 | 普通用户访问服务商管理 | 不显示"新建"按钮 | | ☐ |
| 无删除权限 | 普通用户查看服务列表 | 不显示"删除"按钮 | | ☐ |

---

## 五、响应式和UI测试

### 5.1 响应式布局

| 测试项 | 操作步骤 | 预期结果 | 实际结果 | 状态 |
|--------|---------|---------|---------|------|
| 桌面端 | 在1920x1080分辨率查看 | 布局正常，表格完整显示 | | ☐ |
| 平板端 | 在iPad尺寸查看 | 表格自适应，可横向滚动 | | ☐ |
| 深色模式 | 切换到深色模式 | 所有组件正确适配深色 | | ☐ |

### 5.2 性能测试

| 测试项 | 操作步骤 | 预期结果 | 实际结果 | 状态 |
|--------|---------|---------|---------|------|
| 首次加载 | 打开服务商列表 | 3秒内完成加载 | | ☐ |
| 列表刷新 | 点击刷新按钮 | 1秒内完成 | | ☐ |
| 大量数据 | 加载100+条记录 | 表格虚拟滚动正常 | | ☐ |

---

## 六、异常情况测试

### 6.1 网络异常

| 测试项 | 操作步骤 | 预期结果 | 实际结果 | 状态 |
|--------|---------|---------|---------|------|
| 断网创建 | 断开网络，创建服务商 | 显示错误提示 | | ☐ |
| 超时处理 | 模拟慢网络 | 显示加载状态，超时后提示 | | ☐ |

### 6.2 数据异常

| 测试项 | 操作步骤 | 预期结果 | 实际结果 | 状态 |
|--------|---------|---------|---------|------|
| 空列表 | 访问无数据的发货单 | 显示"暂无数据" | | ☐ |
| 并发操作 | 同时编辑和删除同一记录 | 显示冲突提示 | | ☐ |

---

## 📊 测试统计

### 测试覆盖率

| 模块 | 测试项总数 | 通过数 | 失败数 | 覆盖率 |
|------|-----------|--------|--------|--------|
| 物流服务商管理 | 25 | - | - | - |
| 物流服务明细 | 20 | - | - | - |
| 凭证管理 | 15 | - | - | - |
| 集成场景 | 8 | - | - | - |
| UI和性能 | 7 | - | - | - |
| 异常处理 | 4 | - | - | - |
| **总计** | **79** | **0** | **0** | **0%** |

### 缺陷统计

| 严重程度 | 数量 | 说明 |
|---------|------|------|
| 致命 | 0 | 导致系统崩溃或数据丢失 |
| 严重 | 0 | 核心功能无法使用 |
| 一般 | 0 | 部分功能异常 |
| 轻微 | 0 | UI显示问题或提示不友好 |

---

## 📝 测试建议

1. **测试顺序**：建议按照文档顺序测试，先测试基础功能，再测试集成场景
2. **数据准备**：每个模块测试前先确认模拟数据已生成
3. **浏览器**：建议使用Chrome或Edge浏览器测试
4. **清理数据**：如需重新测试，可执行 `flask logistics clean --confirm` 清理数据

---

## 🐛 缺陷报告模板

发现问题请按以下格式记录：

```
【缺陷标题】：物流服务商列表刷新失败

【严重程度】：一般

【重现步骤】：
1. 打开物流服务商管理页面
2. 点击工具栏的刷新按钮
3. 观察结果

【预期结果】：列表数据重新加载

【实际结果】：页面报错

【截图】：[附上截图]

【环境信息】：
- 浏览器：Chrome 120
- 操作系统：Windows 11
- 测试时间：2025-12-19 10:30
```

---

## ✅ 测试完成确认

- [ ] 所有测试项已完成
- [ ] 测试统计表已更新
- [ ] 发现的缺陷已记录
- [ ] 测试报告已归档

**测试人员签名**：___________  
**测试日期**：___________

